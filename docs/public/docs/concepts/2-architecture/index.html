<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Carbonaut Architecture # To get an overview of the resource consumption of a cloud native system, you need to combine different data sources with each other. Carbonaut should be the platform to facilitate the data integration and transformation. To explore the architecture of the carbonaut system we first start with the data sources.
Data Sources # These data sources can be integrated dynamically (we add a data stream to the system) or static as (we use a configuration file to select a formular)."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/docs/concepts/2-architecture/"><meta property="og:site_name" content="Carbonaut Docs"><meta property="og:title" content="Architecture"><meta property="og:description" content="Carbonaut Architecture # To get an overview of the resource consumption of a cloud native system, you need to combine different data sources with each other. Carbonaut should be the platform to facilitate the data integration and transformation. To explore the architecture of the carbonaut system we first start with the data sources.
Data Sources # These data sources can be integrated dynamically (we add a data stream to the system) or static as (we use a configuration file to select a formular)."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>Architecture | Carbonaut Docs</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=http://localhost:1313/docs/concepts/2-architecture/><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel=stylesheet><link rel=stylesheet href=/book.min.5ed63653ee6d2fc8583e46fd5a2cd5e7160dd6d06ffc58cc21b13848767671a4.css integrity="sha256-XtY2U+5tL8hYPkb9WizV5xYN1tBv/FjMIbE4SHZ2caQ=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.d0f03869380eb92b4e9b8176f816d140933b4b84fc83eee9102a572ba60ec176.js integrity="sha256-0PA4aTgOuStOm4F2+BbRQJM7S4T8g+7pECpXK6YOwXY=" crossorigin=anonymous></script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo><span>Carbonaut Docs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Concepts</span><ul><li><a href=/docs/concepts/1-overview/>Overview</a></li><li><a href=/docs/concepts/2-architecture/ class=active>Architecture</a></li><li><a href=/docs/concepts/plugins/>Plugins</a></li><li><a href=/docs/concepts/advanced/>Advanced</a></li></ul></li><li class=book-section-flat><a href=/docs/installation/>Installation</a><ul><li><a href=/docs/installation/getting-started/>Getting Started</a></li></ul></li><li class=book-section-flat><input type=checkbox id=section-b78b00acf537e50586ae380e7fd00f43 class=toggle>
<label for=section-b78b00acf537e50586ae380e7fd00f43 class="flex justify-between"><a href=/docs/plugins/>Plugins</a></label><ul><li><a href=/docs/plugins/equinix/>Equinix</a></li><li><a href=/docs/plugins/scaphandre/>Scaphandre</a></li></ul></li><li class=book-section-flat><input type=checkbox id=section-13b92d0d0bccf417c5d521db76c99b37 class=toggle>
<label for=section-13b92d0d0bccf417c5d521db76c99b37 class="flex justify-between"><a href=/docs/reference/>Reference</a></label><ul><li><a href=/docs/reference/api/>API</a></li><li><a href=/docs/reference/data-schema/>Data Schema</a></li><li><a href=/docs/reference/provider-schema/>Provider Schema</a></li></ul></li><li class=book-section-flat><a href=/docs/contributing/>Contributing</a><ul></ul></li></ul><ul><li><a href=https://github.com/leonardpahlke/carbonaut target=_blank rel=noopener>GitHub â†—</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Architecture</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#carbonaut-architecture><strong>Carbonaut Architecture</strong></a></li><li><a href=#data-sources>Data Sources</a></li></ul><ul><li><a href=#1-overview>1. Overview</a><ul><li><a href=#11-purpose>1.1. Purpose</a></li><li><a href=#12-scope>1.2. Scope</a></li><li><a href=#13-requirements>1.3. Requirements</a></li></ul></li><li><a href=#2-system-architecture>2. System Architecture</a><ul><li><a href=#21-context>2.1. Context</a></li><li><a href=#22-plugins>2.2. Plugins</a></li><li><a href=#23-internal-components--building-blocks>2.3. Internal Components / Building Blocks</a></li><li><a href=#24-deployment>2.4. Deployment</a></li></ul></li><li><a href=#3-data-dictionary>3. Data Dictionary</a></li><li><a href=#4-software-domain-design>4. Software Domain Design</a><ul><li><a href=#41-software-application-domain-chart>4.1. Software Application Domain Chart</a></li><li><a href=#42-software-application-domain>4.2. Software Application Domain</a></li></ul></li><li><a href=#5-data-design>5. Data Design</a><ul><li><a href=#51-persistentstatic-data>5.1. Persistent/Static Data</a></li><li><a href=#52-transientdynamic-data>5.2. Transient/Dynamic Data</a></li><li><a href=#53-external-interface-data>5.3. External Interface Data</a></li><li><a href=#54-transformation-of-data>5.4. Transformation of Data</a></li></ul></li><li><a href=#6-user-interface>6. User Interface</a><ul><li><a href=#61-user-interface-design-overview>6.1. User Interface Design Overview</a></li><li><a href=#62-user-interface-navigation-flow>6.2. User Interface Navigation Flow</a></li><li><a href=#63-use-cases--user-function-description>6.3. Use Cases / User Function Description</a></li></ul></li><li><a href=#7-external-interfaces>7. External Interfaces</a><ul><li><a href=#71-interface-x>7.1. Interface X</a></li></ul></li><li><a href=#8-comments>8. Comments</a></li><li><a href=#9-references>9. References</a></li><li><a href=#10-glossary>10. Glossary</a></li></ul></nav></aside></header><article class="markdown book-article"><h2 id=carbonaut-architecture><strong>Carbonaut Architecture</strong>
<a class=anchor href=#carbonaut-architecture>#</a></h2><p>To get an overview of the resource consumption of a cloud native system, you need to combine different data sources with each other. Carbonaut should be the platform to facilitate the data integration and transformation. To explore the architecture of the carbonaut system we first start with the data sources.</p><h2 id=data-sources>Data Sources
<a class=anchor href=#data-sources>#</a></h2><p>These data sources can be integrated dynamically (we add a data stream to the system) or static as (we use a configuration file to select a formular).</p><p><strong>Dynamic Data Sources</strong>:</p><ul><li><strong>Energy</strong>: Energy metrics that gives us information about joules used which can be mapped to KwH.</li><li><strong>IT Resources</strong>: IT Resources that include various hardware information like CPU type, CPU cores, storage, DRAM etc.</li><li><strong>Geolocation</strong>: geolocation (longitude, latitude) based on IP address</li><li><strong>Energy Mix</strong>: current energy mix for the specified geolocation</li></ul><p><strong>Static Data Sources</strong>:</p><ul><li><strong>Emission</strong>: formualar to estimate the emissions based on the energy consumption, energy mix and IT resource typ.</li></ul><p>These data sources depend on each other.</p><blockquote class="book-hint info"><strong>Markdown content</strong><br>Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat
stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa</blockquote><script src=/mermaid.min.js></script><script>mermaid.initialize({flowchart:{useMaxWidth:!0},theme:"default"})</script><p class="mermaid optional">stateDiagram-v2
State1: The state with a note
note right of State1
Important information! You can write
notes.
end note
State1 --> State2
note left of State2 : This is the note to the left.</p><div class=mermaid>graph TD;
GEOLOCATION[Geolocation] --depends on--> IT_RESOURCE[IT Resource];
ENERGY_MIX[Energy Mix] --depends on--> GEOLOCATION;
ENERGY[Energy] --depends on--> IT_RESOURCE;
EMISSION[Emission] --depends on--> ENERGY;
EMISSION --depends on--> ENERGY_MIX;
EMISSION --depends on--> IT_RESOURCE;</div><p>From this diagram its clear that in order to expose data about the emissions of the system, it is required to first collect all the other data sources of the system.</p><p>Each of these types of data</p><h1 id=architecture-overview>Architecture Overview
<a class=anchor href=#architecture-overview>#</a></h1><p><code>Version 1.0 April 2024</code></p><p>This document describes the architecture of the Carbonaut project. Iterations on the architecture as well as deep dives into certain parts are written up in dedicated files.</p><h2 id=1-overview>1. Overview
<a class=anchor href=#1-overview>#</a></h2><p>This documentation follows the
<a href="https://docs.google.com/document/d/1pgMutdDasJb6eN6yK6M95JM8gQ16IKacxxhPXgeL9WY/edit#heading=h.lomckg6w5y6">Google Software Design Document</a> structure.</p><h3 id=11-purpose>1.1. Purpose
<a class=anchor href=#11-purpose>#</a></h3><p>Carbonaut is used to collect, integrate, and publish metrics related to the sustainability of cloud native environments. It seamlessly integrates with the observability stack in a cloud native setting.</p><p>Environmental considerations and awareness of resource usage are generally emerging fields in economics, compelling us to discover innovative approaches for our products and services. For instance, we are transitioning from fast fashion to sustainable fashion, from coal to renewables, and from gasoline-powered to electric and hydrogen vehicles. This requires building an understanding of the supply chain and taking responsibility for how your products or services are assembled. These sustainable transformations vary in impact and quality but affect everything, including software engineering. Software represents another transformation in our economies, challenging current business models in various aspects. Sustainable software engineering merges these transformations.</p><p>In the realm of software, we find areas like distributed systems and cloud computing, which are major consumers of energy. It is estimated that the energy consumed by data centers globally emits more greenhouse gases than the aviation industry. Therefore, there is a pressing need to engage in this transformation and shape cloud technology in a more sustainable manner. Fortunately, this field is not confined to private companies but is a significant and industry-relevant area known as cloud native.</p><h3 id=12-scope>1.2. Scope
<a class=anchor href=#12-scope>#</a></h3><p>This project focuses on the development of a single module that may be extended through plugins. If developed plugins should be integrated directly into the module, resulting in a single binary. There may also be an option to deploy multiple instances of this module to support higher throughput.</p><p>The primary role of the module is not to collect metrics itself; rather, it integrates with other tools that generate these metrics. However, to enhance the quality of the metrics by combining and refining them, such functionality can be incorporated within the module.</p><h3 id=13-requirements>1.3. Requirements
<a class=anchor href=#13-requirements>#</a></h3><h4 id=131-functional-requirements>1.3.1. Functional Requirements**:
<a class=anchor href=#131-functional-requirements>#</a></h4><ul><li><strong>Plugin Integration and Management</strong>: The system must support the integration of plugins directly into the main module, creating a unified binary. The module must provide an interface for loading and managing plugins. All plugins will follow a common integration structure which has to be defined. The &ldquo;kinds&rdquo; of a plugin is defined by the data required by the system. One data type, one plugin.</li><li><strong>Data Collection and Integration</strong>: While the module itself will not collect metrics directly, it must integrate seamlessly with external interfaces and tools that provide these metrics. The system must normalize data from various sources to a common schema suitable for analysis and reporting. The exposed metrics should be in
<a href=https://opentelemetry.io/>opentelemetry</a> format.</li><li><strong>Metric Enhancement</strong>: The module should have the capability to enhance the quality of metrics by combining data from multiple sources if reasonable. For example, in order to estimate carbon emissions energy, it resource and energy data needs to be caluclated.</li><li><strong>Scalability and Deployment</strong>: The system should support deployment in both single and multiple module configurations to facilitate varying levels of throughput. Ensure that the system can scale horizontally to manage increased load by adding more instances as required.</li><li><strong>Data Privacy and Security</strong>: Implement standard security measures to protect data integrity and confidentiality during the data collection and integration processes. Compliance with relevant data protection regulations must be ensured.</li></ul><h4 id=132-non-functional-requirements>1.3.2. Non-Functional Requirements:
<a class=anchor href=#132-non-functional-requirements>#</a></h4><ul><li><strong>Performance</strong>: The system must process data efficiently, ensuring minimal latency in metric availability. Performance benchmarks should be established, particularly for data processing speeds and response times &lt;100 milliseconds and in bulk &lt;5 second.</li><li><strong>Reliability</strong>: The system must be robust, with capabilities to handle failures gracefully and ensure continuous operation. In the event that a module fails any modules that depend on it will either stop execution or publish parts of the requested data if available for later analysis. The user should have an interface to be aware of any failures happening. Upcon recovery modules should automatically restart, seaminglessly integrating already collected data if present with new data.</li><li><strong>Usability</strong>: The interface for managing plugins and configurations must be user-friendly, catering to technical users. Logs generated through using the system can be either send to the terminal or written in a file for further analysis. The system provides documentation on system setup, configuration, and management.</li><li><strong>Maintainability</strong>: The code base should be documented on a separate website and structured in such a way that easy maintenance and future upgrades are possible. The code follows common standards in terms of lining, inline comments and unit, integration and other testing if appropiate. In this way, it adheres to coding standards that promote code readability and reusability.</li><li><strong>Interoperability</strong>: The module should be compatible with existing and commonly used cloud native tools and platforms. Support for open standards and protocols to ensure seamless integration with a variety of data sources and tools.</li><li><strong>Open Source Development</strong>: The project is developed as open source project from the start. This includes a public repository, documentation, feature management, development and community structures (if required).</li></ul><h2 id=2-system-architecture>2. System Architecture
<a class=anchor href=#2-system-architecture>#</a></h2><h3 id=21-context>2.1. Context
<a class=anchor href=#21-context>#</a></h3><p>Carbonaut fits in a cloud native system.</p><p><img src=./assets/docs/carbonaut-context.drawio.png alt></p><div class=mermaid>sequenceDiagram
Alice->>John: Hello John, how are you?
John-->>Alice: Great!
Alice-)John: See you later!</div><h3 id=22-plugins>2.2. Plugins
<a class=anchor href=#22-plugins>#</a></h3><h3 id=23-internal-components--building-blocks>2.3. Internal Components / Building Blocks
<a class=anchor href=#23-internal-components--building-blocks>#</a></h3><h3 id=24-deployment>2.4. Deployment
<a class=anchor href=#24-deployment>#</a></h3><h2 id=3-data-dictionary>3. Data Dictionary
<a class=anchor href=#3-data-dictionary>#</a></h2><h2 id=4-software-domain-design>4. Software Domain Design
<a class=anchor href=#4-software-domain-design>#</a></h2><h3 id=41-software-application-domain-chart>4.1. Software Application Domain Chart
<a class=anchor href=#41-software-application-domain-chart>#</a></h3><h3 id=42-software-application-domain>4.2. Software Application Domain
<a class=anchor href=#42-software-application-domain>#</a></h3><h4 id=421-domain-x>4.2.1. Domain X
<a class=anchor href=#421-domain-x>#</a></h4><h5 id=4211-component-y-of-domain-x>4.2.1.1. Component Y of Domain X
<a class=anchor href=#4211-component-y-of-domain-x>#</a></h5><h6 id=4211-task-z-of-component-y1-of-domain-x>4.2.1.1. Task Z of Component Y1 of Domain X
<a class=anchor href=#4211-task-z-of-component-y1-of-domain-x>#</a></h6><h2 id=5-data-design>5. Data Design
<a class=anchor href=#5-data-design>#</a></h2><p>Since the module does not store the data itself but rather exposes it, no additional database is required.</p><p>scalability and performance</p><p>security considerations related to data</p><h3 id=51-persistentstatic-data>5.1. Persistent/Static Data
<a class=anchor href=#51-persistentstatic-data>#</a></h3><h4 id=511-dataset>5.1.1. Dataset
<a class=anchor href=#511-dataset>#</a></h4><h4 id=511-static-data>5.1.1. Static Data
<a class=anchor href=#511-static-data>#</a></h4><h4 id=511-persisted-data>5.1.1. Persisted data
<a class=anchor href=#511-persisted-data>#</a></h4><p>There is none persistent data. There may be data stored at runtime based on failures of plugins within the module which can force another plugin to &ldquo;hold on the data&rdquo; until the other plugin was restarted, the application shut down or no memory is left.</p><h3 id=52-transientdynamic-data>5.2. Transient/Dynamic Data
<a class=anchor href=#52-transientdynamic-data>#</a></h3><p>This is the main part of the application.</p><h3 id=53-external-interface-data>5.3. External Interface Data
<a class=anchor href=#53-external-interface-data>#</a></h3><h3 id=54-transformation-of-data>5.4. Transformation of Data
<a class=anchor href=#54-transformation-of-data>#</a></h3><h2 id=6-user-interface>6. User Interface
<a class=anchor href=#6-user-interface>#</a></h2><h3 id=61-user-interface-design-overview>6.1. User Interface Design Overview
<a class=anchor href=#61-user-interface-design-overview>#</a></h3><h3 id=62-user-interface-navigation-flow>6.2. User Interface Navigation Flow
<a class=anchor href=#62-user-interface-navigation-flow>#</a></h3><h3 id=63-use-cases--user-function-description>6.3. Use Cases / User Function Description
<a class=anchor href=#63-use-cases--user-function-description>#</a></h3><h2 id=7-external-interfaces>7. External Interfaces
<a class=anchor href=#7-external-interfaces>#</a></h2><h3 id=71-interface-x>7.1. Interface X
<a class=anchor href=#71-interface-x>#</a></h3><h2 id=8-comments>8. Comments
<a class=anchor href=#8-comments>#</a></h2><h2 id=9-references>9. References
<a class=anchor href=#9-references>#</a></h2><h2 id=10-glossary>10. Glossary
<a class=anchor href=#10-glossary>#</a></h2></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/leonardpahlke/carbonaut/docs/content/docs/concepts/2-architecture.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#carbonaut-architecture><strong>Carbonaut Architecture</strong></a></li><li><a href=#data-sources>Data Sources</a></li></ul><ul><li><a href=#1-overview>1. Overview</a><ul><li><a href=#11-purpose>1.1. Purpose</a></li><li><a href=#12-scope>1.2. Scope</a></li><li><a href=#13-requirements>1.3. Requirements</a></li></ul></li><li><a href=#2-system-architecture>2. System Architecture</a><ul><li><a href=#21-context>2.1. Context</a></li><li><a href=#22-plugins>2.2. Plugins</a></li><li><a href=#23-internal-components--building-blocks>2.3. Internal Components / Building Blocks</a></li><li><a href=#24-deployment>2.4. Deployment</a></li></ul></li><li><a href=#3-data-dictionary>3. Data Dictionary</a></li><li><a href=#4-software-domain-design>4. Software Domain Design</a><ul><li><a href=#41-software-application-domain-chart>4.1. Software Application Domain Chart</a></li><li><a href=#42-software-application-domain>4.2. Software Application Domain</a></li></ul></li><li><a href=#5-data-design>5. Data Design</a><ul><li><a href=#51-persistentstatic-data>5.1. Persistent/Static Data</a></li><li><a href=#52-transientdynamic-data>5.2. Transient/Dynamic Data</a></li><li><a href=#53-external-interface-data>5.3. External Interface Data</a></li><li><a href=#54-transformation-of-data>5.4. Transformation of Data</a></li></ul></li><li><a href=#6-user-interface>6. User Interface</a><ul><li><a href=#61-user-interface-design-overview>6.1. User Interface Design Overview</a></li><li><a href=#62-user-interface-navigation-flow>6.2. User Interface Navigation Flow</a></li><li><a href=#63-use-cases--user-function-description>6.3. Use Cases / User Function Description</a></li></ul></li><li><a href=#7-external-interfaces>7. External Interfaces</a><ul><li><a href=#71-interface-x>7.1. Interface X</a></li></ul></li><li><a href=#8-comments>8. Comments</a></li><li><a href=#9-references>9. References</a></li><li><a href=#10-glossary>10. Glossary</a></li></ul></nav></div></aside></main></body></html>