<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This page describes the architecture of the Carbonaut project. This document is intended to convey the essence of the architecture, with further details available on separate concept sub-pages. The diagram below shows the general overview of the Carbonaut project, by describing each individual components in the following sections.
Context # The Carbonaut project aims to establish a data layer for environmental sustainability related software data so that it can be used by a variety of applications."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://localhost:1313/docs/reference/architecture_old/"><meta property="og:site_name" content="Carbonaut Docs"><meta property="og:title" content="Carbonaut Docs"><meta property="og:description" content="This page describes the architecture of the Carbonaut project. This document is intended to convey the essence of the architecture, with further details available on separate concept sub-pages. The diagram below shows the general overview of the Carbonaut project, by describing each individual components in the following sections.
Context # The Carbonaut project aims to establish a data layer for environmental sustainability related software data so that it can be used by a variety of applications."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><title>Architecture Old | Carbonaut Docs</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=canonical href=http://localhost:1313/docs/reference/architecture_old/><link rel=stylesheet href=/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.01c21e35a8500ba3e1eb4c09b1a780669d5baed0de8567201f13f56b96919ff7.js integrity="sha256-AcIeNahQC6Ph60wJsaeAZp1brtDehWcgHxP1a5aRn/c=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Carbonaut Docs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Concepts</span><ul><li><a href=/docs/concepts/architecture/>Architecture</a></li><li><a href=/docs/concepts/architecture_old/>Architecture Old</a></li><li><a href=/docs/concepts/connector-pugins/>Connector Pugins</a></li><li><a href=/docs/concepts/data-mixer/>Data Mixer</a></li><li><a href=/docs/concepts/data-schema/>Data Schema</a></li></ul></li><li><span>Getting Started</span><ul><li><a href=/docs/getting-started/architecture_old/>Architecture Old</a></li></ul></li><li><span>Reference</span><ul><li><a href=/docs/reference/architecture_old/ class=active>Architecture Old</a></li></ul></li><li><span>Tasks</span><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Architecture Old</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#context>Context</a></li><li><a href=#big-data-setting>Big Data Setting</a></li><li><a href=#carbonaut-building-blocks>Carbonaut Building Blocks</a></li><li><a href=#data-flow>Data flow</a></li><li><a href=#deployment>Deployment</a></li></ul></nav></aside></header><article class="markdown book-article"><p>This page describes the architecture of the Carbonaut project. This document is intended to convey the essence of the architecture, with further details available on separate concept sub-pages. The diagram below shows the general overview of the Carbonaut project, by describing each individual components in the following sections.</p><h2 id=context>Context
<a class=anchor href=#context>#</a></h2><p>The Carbonaut project aims to establish a data layer for environmental sustainability related software data so that it can be used by a variety of applications. More information about the vision and goals are found here â†’. The diagram below shows the general context of Carbonaut.</p><p>&mldr;</p><p>To set up a data layer, Carbonaut needs to collect data from various sources and integrate it into a common schema that can be used by applications. To know how your IT infrastructure is designed, you need to know about your deployments in Kubernetes or in cloud. To calculate the carbon footprint of your applications, you also need to know about the energy consumption of the data centers you use. All of this needs to be integrated, and since the data comes from multiple sources, it needs to be normalized. Especially for large companies with many different applications, this is a complex task.</p><h2 id=big-data-setting>Big Data Setting
<a class=anchor href=#big-data-setting>#</a></h2><p>In general, the project is placed in a big data system setting. As mentioned before, establish a software sustainability data layer, the project needs to work with loads of different kinds of heterogeneous data formats and needs to integrate the data into a common schema. If we follow a generic big data architecture, we have something like the diagram shown below.</p><p>&mldr;</p><p>The ETL service is responsible for performing the data integration of the different kinds of data sources. The ETL sends the data through a data stream (e.g., Apache Spark) and into a database. Another service does analytics on the stored data, for example in real time through the data stream or via batching on top of the database. An API provides a nice interface of the collected data to display it in a user interface. Carbonaut could follow this pattern and build an entire end to end suite.</p><p>However, usually, there is no need to build an entire system and the Carbonaut idea can be embedded in existing systems. The Cloud Native community build powerful standards and tools with <a href=https://prometheus.io/>Prometheus</a>
and <a href=https://opentelemetry.io/>Open Telemetry</a>, which can be extended. The Carbonaut project therefore proposes single building blocks which can be integrated in your big data system without dictating the entire end to end big data system. The diagram below illustrates this idea.</p><p>&mldr;</p><p>Reflecting on the big data architecture diagram further, the main core components, which are Carbonaut specific, are the ETL service and to some extent the analytics service. All the other components can be defined by the end user and are not core to the Carbonaut project. The Carbonaut project implements this ETL service, which also performs lightweight static analysis.</p><h2 id=carbonaut-building-blocks>Carbonaut Building Blocks
<a class=anchor href=#carbonaut-building-blocks>#</a></h2><p>The technical components of Carbonaut are shown below.</p><p>&mldr;</p><p><strong>Components</strong>:</p><ul><li><strong>Core</strong>: The core puts all the other components together. It is responsible for the lifecycle management.</li><li>Configuration Management: Carbonaut uses yaml files for its configuration. Updating the configuration results in a restart of Carbonaut.</li><li><strong>Connector</strong>: The connector is responsible for loading and managing plugins. Plugins can be deployed as subprocess inside the Carbonaut container or managed independently as a seperate process. Regardless of the deployment, plugins implement a gRPC server which is used to communicate with the plugin adapter.</li><li><strong>Data Mixer</strong>: The data mixer joins by configuration data sources from different metrics together to create higher quality metrics (for example, emissions for your Kubernetes nodes based on the energy consumption and location of the underlying data center). The data mixer should allow to swap out data models and caluclations at runtime without altering the origin of the data.</li><li><strong>Analyzer</strong>: The analyzer is responsible for performing static analysis on the data. The analyzer is also responsible for creating meta-metrics about the data collection.</li><li><strong>Metrics Server</strong>: The metrics server exposes the metrics in the Open Telemetry format.</li></ul><p>Plugin A and Plugin B are two different plugins shown to illustrate the Connector component. The Connector integrates with any number of plugins that implement the gRPC client.</p><h2 id=data-flow>Data flow
<a class=anchor href=#data-flow>#</a></h2><p>Carbonaut data integration is split into three sections, which are executed after one another.</p><ol><li>First, the plugins gather raw data from the data sources. This data is vendor-specific and can be in any format. The plugins are responsible for normalizing the data into a common format. The common format is the Carbonaut DTO schemas (DTO stands for Data Transfer Object).</li><li>The connector receives the normalized data from the plugins and sends it to the analytics component, which includes the data mixer subcomponent, the meta metrics subcomponent and the DTO transformer subcomponent.<ol><li>The data mixer joins the data from different plugins together and creates MixedMetrics.</li><li>The meta metrics subcomponent creates meta metrics about the data collection.</li><li>The DTO transformer subcomponent transforms the data DTO schemas into Carbonaut metrics without performing further data manipulation.</li></ol></li><li>The metrics server requests the metrics data schemas from the analytics component and exposes them in the Open Telemetry format.</li></ol><p>The following diagram shows the data flow with four plugins connected as an example.</p><p>&mldr;</p><p>The page Carbonaut Data Schema describes the data schemas in more detail and the page Carbonaut Data Mixer describes how the data mixer enriches different data sources.</p><h2 id=deployment>Deployment
<a class=anchor href=#deployment>#</a></h2><p>Carbonaut can be deployed in two flavours, single deployment mode (e.g. one container) or multi deployment mode (e.g. multiple containers). The fist diagram shows the single container mode where plugings are started as subprocesses and integrated via gRPC. The second diagram shows the multi container mode where plugins are run as seperate instances (for example as containers) which are also integrated via gRPC.</p><p>&mldr;</p><p>Single Deployment Guide &mldr;</p><p>Multi Deployment Guide &mldr;</p><p>For some big systems a single Carbonaut depolyment will be the bottleneck. In this case it is possible to run multiple Carbonaut instances in parallel with a distinct plugin configuration.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#context>Context</a></li><li><a href=#big-data-setting>Big Data Setting</a></li><li><a href=#carbonaut-building-blocks>Carbonaut Building Blocks</a></li><li><a href=#data-flow>Data flow</a></li><li><a href=#deployment>Deployment</a></li></ul></nav></div></aside></main></body></html>